{% from "result_lines.html" import result_lines -%}

{% macro results_list(results, www_root, tree) -%}
  {% for result in results %}
    <table class="results">
      <caption class="visually-hidden">Query matches</caption>
      <thead class="visually-hidden">
        <tr>
          <th scope="col">Line</th>
          <th scope="col">Code Snippet</th>
        </tr>
      </thead>
      <tbody class="result" data-path="{{ result.path }}">
      <tr class="result-head">
        <td class="left-column">
          <div class="{{result.iconClass}} icon-container"></div>
        </td>
        <td>
          {{ result.pathLine|safe }}
        </td>
      </tr>
      {{ result_lines(result, www_root, tree) }}
      </tbody>
    </table>
  {% endfor %}
{%- endmacro %}

{# When not being included as a macro, render the code above. #}
{{ results_list(results, www_root, tree) }}
